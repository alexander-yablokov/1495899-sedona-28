<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <title>Седона. Путешествие в Аризону.</title>
  <link href="css/normalize.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
</head>

<body>
  <div class="main-wrapper">
    <header class="main-header">
      <nav class="main-navigation">
        <a href="index.html" class="logo"><img src="img/sedona-logo.svg" alt="Логотип Седоны" width="138"
            height="70"></a>
        <ul>
          <li><a href="#">Информация</a></li>
          <li><a href="#">Фото и видео</a></li>
          <li><a href="#">Карта штата</a></li>
          <li><a>Гостиницы</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <h1 class="visually-hidden">Городок Седона. Предложения гостиниц, мотелей, апартаменов</h1>
      <section class="hotel-filter">
        <h2 class="visually-hidden">Фильтр поиска</h2>
        <form class="form-filter" name="form_filter" method="get" action="https://echo.htmlacademy.ru/">
          <fieldset class="filter-checkboxes">
            <label>Инфраструктура:</label>
            <label>
              <input type="checkbox" id="field_has_pool" name="has_pool" checked>  
              <span>Бассейн</span>              
            </label>
            <label>
              <input type="checkbox" id="field_has_parking" name="has_parking">
              <span>Парковка</span>
            </label>
            <label>
              <input type="checkbox" id="field_has_wifi" name="has_wifi">
              <span>Wi-fi</span>
            </label>
          </fieldset>
          <fieldset class="filter-checkboxes">
            <label>Тип жилья:</label>
            <label>
              <input type="checkbox" id="field_category_hotel" name="category_hotel" checked>
              <span>Гостиница</span>
            </label>
            <label>
              <input type="checkbox" id="field_category_motel" name="category_motel" checked>
              <span>Мотель</span>
            </label>
            <label>
              <input type="checkbox" id="field_category_apartment" name="category_apartment" checked>
              <span>Апартаменты</span>
            </label>
          </fieldset>


          <div class="filter-slider-set">
            <h3>Стоимость в сутки (Р):</h3>
            <div class="slider-inputs"> 
              <span class="low-limit" contenteditable="true">0</span>
              <span class="top-limit" contenteditable="true">3000</span>
            </div>  
            <div class="slider">
              <div class="range"></div>
              <div class="min-range handle" id="min-range-field"></div>
              <div class="max-range handle" id="max-range-field"></div>
            </div>
            <button class="submit-form" type="submit">ПОКАЗАТЬ</button>
          </div>



        </form>
        <div class="sorting">
          <span class="result-quantity">Найдено: 3</span>
          <span class="sorting-by">Сортировка:</span>
          <ul class="sorting-by-list">
            <li>
              <a class="sorting-by-item">По цене</a>
            </li>
            <li>
              <a class="sorting-by-item" href="#">По типу</a>
            </li>
            <li>
              <a class="sorting-by-item" href="#">По рейтингу</a>
            </li>
          </ul>
          <div class="sorting-order">
            <a class="sort-direction-up" href="#"><img src="img/icon-up-dir.svg" alt="Сортировка по возрастанию"></a>
            <a class="sort-direction-down" href="#"><img src="img/icon-down-dir.svg" alt="Сортировка по убыванию"></a>
          </div>
        </div>
      </section>
      <section class="results">
        <h2 class="visually-hidden">Результаты поиска</h2>
        <article class="result-item">
          <div class="result-description">
            <h2 class="title">Amara Resort & Spa</h2>
            <div class="row-1">
              <p class="category">Гостиница</p>
              <p class="price">От 4000 Р.</p>
            </div>
            <div class="row-2">
              <a class="button details" href="#">Подробнее</a>
              <a class="button booking" href="#">Забронировать</a>
            </div>
          </div>
          <div class="result-level">
            <p class="stars four-stars">Звезды: 4</p>
            <p class="rating">Рейтинг: 8,5</p>
          </div>
          <div class="result-photo">
            <img src="img/amara.jpg" alt="Amara Resort & Spa" width="135" height="90">
          </div>
        </article>
        <article class="result-item">
          <div class="result-description">
            <h2 class="title">Desert Quail Inn</h2>
            <div class="row-1">
              <p class="category">Мотель</p>
              <p class="price">От 3000 Р.</p>
            </div>
            <div class="row-2">
              <a class="button details" href="#">Подробнее</a>
              <a class="button booking" href="#">Забронировать</a>
            </div>
          </div>
          <div class="result-level">
            <p class="stars three-stars">Звезды: 3</p>
            <p class="rating">Рейтинг: 8,9</p>
          </div>
          <div class="result-photo">
            <img src="img/quail.jpg" alt="Desert Quail Inn" width="135" height="90">
          </div>
        </article>
        <article class="result-item">
          <div class="result-description">
            <h2 class="title">Villas at Poco Diablo</h2>
            <div class="row-1">
              <p class="category">Апартаменты</p>
              <p class="price">От 2000 Р.</p>
            </div>
            <div class="row-2">
              <a class="button details" href="#">Подробнее</a>
              <a class="button booking" href="#">Забронировать</a>
            </div>
          </div>
          <div class="result-level">
            <p class="stars two-stars">Звезды: 2</p>
            <p class="rating">Рейтинг: 9,2</p>
          </div>
          <div class="result-photo">
            <img src="img/villas.jpg" alt="Villas at Poco Diablo" width="135" height="90">
          </div>
        </article>
      </section>
    </main>
    <footer class="main-footer">
      <section class="contacts">
        <h2 class="visually-hidden">Контакты</h2>
        <p>
          <span class="hashtag">#visitSEDONA</span><br>
          тел: <a href="tel:+74956660166">7(495) 666-01-66</a>
        </p>
      </section>
      <section class="social-networks">
        <h2 class="visually-hidden">Контакты в соцсетях</h2>
        <ul class="social-icons">
          <li>
            <a class="twitter" href="#">Твиттер</a>
          </li>
          <li>
            <a class="facebook" href="#">Фейсбук</a>
          </li>
          <li>
            <a class="youtube" href="#">YouTube</a>
          </li>
        </ul>
      </section>
      <section class="developer">
        <h2 class="visually-hidden">Разработчик</h2>
        <p>
          <span>Website by</span>
          <span>
            <a class="logo-academy" href="https://htmlacademy.ru/intensive/htmlcss">html academy</a>
          </span>
        </p>
      </section>
    </footer>
  </div>
<script>
  class Slider {
    constructor (min=0, max=4000) {
      this.min = min;
      this.max = max;
    }

    mouseDownHandler = (e) => { 
      e.preventDefault();
      document.addEventListener("mouseup", this.mouseUpHandler);
      document.addEventListener("mousemove", this.mouseMoveHandler);
    }

    mouseUpHandler = (e) => {
      e.preventDefault();
      document.removeEventListener("mousemove", this.mouseMoveHandler);
      document.removeEventListener("mouseup", this.mouseUpHandler);
    }

    mouseMoveHandler = (e) => {
      e.preventDefault();

      const leftPosition = this.handle1.style.left;
      const minValue = parseInt(leftPosition); 
      const rightPosition = parseInt(this.handle2.style.left);
      const maxValue = parseInt(rightPosition); 

      let newPosition = parseInt(e.target.style.left) + e.movementX;
      if (e.target === this.handle1) {
        if (newPosition < 0) {
          newPosition=0;
        } else 
        if (newPosition > maxValue-20) {
          newPosition = rightPosition - 20;
        }
      }
      if (e.target === this.handle2) {
        if (newPosition > 317-10) {
          newPosition=317-10;
        } else 
        if (newPosition < minValue+20) {
          newPosition = leftPosition + 20;
        }
      }
      e.target.style.left = `${newPosition}px`;

      this.range.style.left=minValue+'px';
      const rangeWidth = maxValue - minValue;
      this.range.style.width = `${rangeWidth}px`;

      this.lowLimit.textContent = Math.floor(minValue * this.unitPerPixel);
      this.topLimit.textContent = Math.ceil(maxValue * this.unitPerPixel);
    }

    init = () => {
      this.slider = document.querySelector(".slider");
      this.sliderWidth = 317;
      this.unitPerPixel = Math.ceil((this.max - this.min) / this.sliderWidth);

      this.range = document.querySelector(".range");

      this.lowLimit = document.querySelector(".low-limit");
      this.topLimit = document.querySelector(".top-limit");

      this.lowLimit.textContent = 0;
      this.topLimit.textContent = this.max * 0.75;

      this.handle1 = document.querySelector(".min-range");
      this.handle2 = document.querySelector(".max-range");
      this.handle1.style.left="0px";
      const topPosition =  this.sliderWidth * 0.75 ;
      this.handle2.style.left = `${topPosition}px`;
      
      this.range.style.left="0px";
      this.range.style.width = `${topPosition}px`;

      
     this.handle1.addEventListener("mousedown", this.mouseDownHandler);
     this.handle2.addEventListener("mousedown", this.mouseDownHandler);
    }

  }
  
    const slider = new Slider();
    slider.init();
  
</script>
</body>

</html>